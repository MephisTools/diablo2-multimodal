$(".z-supersize-btn").on('click', function(e) {
    if ($('.z-supersize-btn').hasClass('is-checked')) {
        $(".z-supersize-btn").removeClass('is-checked');
        localStorage.setItem('width', "");
        $("#z-superwide-choice").attr('href', '');
        $('.element-item').each(function() {
            $(this).find('.postlove-button').prependTo($(this).find('.z-poster-buttons'));
            $(this).find('.z-like-btn-post').removeClass('z-btn-tf');
        });
    } else {
        $(".z-supersize-btn").addClass('is-checked');
        localStorage.setItem('width', "styles/zulu/theme/superwide.css");
        $("#z-superwide-choice").attr('href', 'styles/zulu/theme/superwide.css');
        $('.element-item').each(function() {
            $(this).find('.postlove-button').prependTo($(this).find('.z-poster-actions-tr'));
            $(this).find('.z-like-btn-post').addClass('z-btn-tf');
        });
    }
    $grid.isotope();
    window.setTimeout(relayout, 200);
});
$(document).on('click', '.z-mobi-closeitem', function(e) {
    tippy.hideAll()
});
$(document).on('click', '.z-hell', function(e) {
    $('.z-night').removeClass('is-checked');
    $('.z-norm').removeClass('is-checked');
    $(this).addClass('is-checked');
    var checknorm = $('.z-norm').hasClass('is-checked');
    var checknight = $('.z-night').hasClass('is-checked');
    var checkhell = $('.z-hell').hasClass('is-checked');
    var thename = $('.z-monsters-norm').find('.is-checked').text();
    if (checknorm) {
        thename2 = '/majax_norm.php?var=' + thename;
        $('.z-majax-url').attr('data-href', thename2);
    } else if (checknight) {
        thename2 = '/majax_night.php?var=' + thename;
        $('.z-majax-url').attr('data-href', thename2);
    } else if (checkhell) {
        thename2 = '/majax_hell.php?var=' + thename;
        $('.z-majax-url').attr('data-href', thename2);
    }
    $('#z-majaxed').fadeOut(200);
    var link = $('.z-majax').find('.z-majax-url-hell').attr('data-href');
    $.ajax({
        url: link,
        retries: 2
    }).done(function(html) {
        $('#z-majaxed').fadeIn(200);
        $('#z-majaxed').html(html);
        window.setTimeout(relayout, 100);
    });
    return false;
    $grid.isotope();
});
$(document).on('click', '.z-night', function(e) {
    $('.z-hell').removeClass('is-checked');
    $('.z-norm').removeClass('is-checked');
    $(this).addClass('is-checked');
    $('#z-majaxed').html('');
    $('#z-majaxed-aux').html('');
    var checknorm = $('.z-norm').hasClass('is-checked');
    var checknight = $('.z-night').hasClass('is-checked');
    var checkhell = $('.z-hell').hasClass('is-checked');
    var thename = $('.z-monsters-norm').find('.is-checked').text();
    if (checknorm) {
        thename2 = '/majax_norm.php?var=' + thename;
        $('.z-majax-url').attr('data-href', thename2);
    } else if (checknight) {
        thename2 = '/majax_night.php?var=' + thename;
        $('.z-majax-url').attr('data-href', thename2);
    } else if (checkhell) {
        thename2 = '/majax_hell.php?var=' + thename;
        $('.z-majax-url').attr('data-href', thename2);
    }
    $('#z-majaxed').fadeOut(200);
    var link = $('.z-majax').find('.z-majax-url-night').attr('data-href');
    $.ajax({
        url: link,
        retries: 2
    }).done(function(html) {
        $('#z-majaxed').fadeIn(200);
        $('#z-majaxed').html(html);
        window.setTimeout(relayout, 100);
    });
    return false;
    $grid.isotope();
});
$(document).on('click', '.z-norm', function(e) {
    $('.z-night').removeClass('is-checked');
    $('.z-hell').removeClass('is-checked');
    $(this).addClass('is-checked');
    var checknorm = $('.z-norm').hasClass('is-checked');
    var checknight = $('.z-night').hasClass('is-checked');
    var checkhell = $('.z-hell').hasClass('is-checked');
    var thename = $('.z-monsters-norm').find('.is-checked').text();
    if (checknorm) {
        thename2 = '/majax_norm.php?var=' + thename;
        $('.z-majax-url').attr('data-href', thename2);
    } else if (checknight) {
        thename2 = '/majax_night.php?var=' + thename;
        $('.z-majax-url').attr('data-href', thename2);
    } else if (checkhell) {
        thename2 = '/majax_hell.php?var=' + thename;
        $('.z-majax-url').attr('data-href', thename2);
    }
    var loggy = $('.z-majax-url-hell').attr('data-href');
    $('#z-majaxed').fadeOut(200);
    var link = $('.z-majax').find('.z-majax-url-norm').attr('data-href');
    $.ajax({
        url: link,
        retries: 2
    }).done(function(html) {
        $('#z-majaxed').fadeIn(200);
        $('#z-majaxed').html(html);
        window.setTimeout(relayout, 100);
    });
    return false;
    $grid.isotope();
});
$(document).on('click', '.z-mvariant1, .z-mvariant2, .z-mvariant3, .z-mvariant4, .z-mvariant5, .z-mvariant6', function(e) {
    $('.z-mvariant1').removeClass('is-checked');
    $('.z-mvariant2').removeClass('is-checked');
    $('.z-mvariant3').removeClass('is-checked');
    $('.z-mvariant4').removeClass('is-checked');
    $('.z-mvariant5').removeClass('is-checked');
    $('.z-mvariant6').removeClass('is-checked');
    $(this).addClass('is-checked');
    var thename = $(this).text();
    var checknorm = $('.z-norm').hasClass('is-checked');
    var checknight = $('.z-night').hasClass('is-checked');
    var checkhell = $('.z-hell').hasClass('is-checked');
    if (checknorm) {
        thename2 = '/majax_norm.php?var=' + thename;
        $('.z-majax-url-hell').attr('data-href', thename2);
    } else if (checknight) {
        thename2 = '/majax_night.php?var=' + thename;
        $('.z-majax-url-hell').attr('data-href', thename2);
    } else if (checkhell) {
        thename2 = '/majax_hell.php?var=' + thename;
        $('.z-majax-url-hell').attr('data-href', thename2);
    }
    var loggy = $('.z-majax-url-hell').attr('data-href');
    $('#z-majaxed').fadeOut(200);
    var link = $('.z-majax').find('.z-majax-url-hell').attr('data-href');
    $.ajax({
        url: link,
        retries: 2
    }).done(function(html) {
        $('#z-majaxed').fadeIn(200);
        $('#z-majaxed').html(html);
        window.setTimeout(relayout, 100);
    });
    return false;
    $grid.isotope();
});
$(document).on('click', '.z-open-skilllvl-panel', function(e) {
    $(this).toggleClass('is-checked');
    $('.z-skilllvl-panel').toggleClass('z-hidden');
    window.setTimeout(relayout, 100);
});
$(document).on('click', '.z-skill1', function(e) {
    $('.z-skilllvls .button').removeClass('is-checked');
    $(this).addClass('is-checked');
    var grabtxt = $(this).html();
    var replaced = 'Level ' + grabtxt + ' <span class="z-space"></span><i class="fas fa-caret-up"></i>';
    $('.z-open-skilllvl-panel').html(replaced);
    var thename = $('.z-skilllvls').find('.is-checked').text();
    var getskillname = $('.z-getname').text();
    var thename2 = '/skills.php?var=' + getskillname + '&lvl=' + thename;
    $('.z-majax-url-skills').attr('data-href', thename2);
    $('#z-majaxed-skills').fadeOut(200);
    var link = $('.z-majax-skills').find('.z-majax-url-skills').attr('data-href');
    $.ajax({
        url: link,
        retries: 2
    }).done(function(html) {
        $('#z-majaxed-skills').fadeIn(200);
        $('#z-majaxed-skills').html(html);
        window.setTimeout(relayout, 100);
    });
    return false;
    $grid.isotope();
});
$(document).on('click', '.z-toggle-search', function(e) {
    $('.z-search-options').toggleClass('z-hidden');
    $('.z-search-caret').toggleClass('z-rot')
});
$(".z-markread").on('click', function(e) {
    $('.z-content').find('.zi-skillcalc').removeClass('zi-skillcalc').addClass('zi-read');
    $(this).addClass('z-marked-read');
    $(this).html('<i class="fas fa-check"></i>&nbsp;Read');
});
$(".z-markread-topics").on('click', function(e) {
    $('.z-catch-markread').find('.zf-unread-ann').removeClass('zf-unread-ann').addClass('zf-read-ann');
    $('.z-catch-markread').find('.zf-unread-sticky').removeClass('zf-unread-sticky').addClass('zf-read-sticky');
    $('.z-catch-markread').find('.zf-unread').removeClass('zf-unread').addClass('zf-read');
    $('.z-unread-mini').addClass('z-hidden');
    $(this).addClass('z-marked-read');
    $(this).html('<i class="fas fa-check"></i>&nbsp;Read');
});
var elm_class = '.z-btt';
var elm_class_two = '.z-btb';
$(".z-btt").on("click", function(e) {
    $("html, body").animate({
        scrollTop: 0
    }, 50)
})
$(".z-btb").on("click", function(e) {
    $("html, body").animate({
        scrollTop: $(document).height()
    }, 50)
})
$(document).on('click', '.z-index-options', function(e) {
    $(this).toggleClass('is-checked');
    $('.z-index-options-caret').toggleClass('z-rot');
    $('.z-index-options-panel').toggleClass('z-shown-inline');
});
$(document).on('click', '.bbcode-palette', function(e) {
    $(this).toggleClass('is-checked');
    $('.z-palette-panel-caret').toggleClass('z-rot');
    $('.z-palette-panel').toggleClass('z-shown-inline');
});
var detailedindex = $('.z-detailed-view-index');
var compactindex = $('.z-compact-view-index');
$('.z-detailed-view-index').on('click', function(e) {
    $("#z-view-index").attr('href', '#');
    localStorage.setItem('viewindex', "#");
    detailedindex.addClass('is-checked');
    compactindex.removeClass('is-checked');
    window.setTimeout(relayout, 1000);
});
$('.z-compact-view-index').on('click', function(e) {
    $("#z-view-index").attr('href', 'styles/zulu/theme/compact-index.css');
    localStorage.setItem('viewindex', "styles/zulu/theme/compact-index.css");
    compactindex.addClass('is-checked');
    detailedindex.removeClass('is-checked');
    window.setTimeout(relayout, 200);
});
$('.z-hide-sidebar').on('click', function(e) {
    $('.z-sidebar').addClass('z-hidden');
    $('.packwrap').addClass('z-fullwidth-main');
    $('.z-show-sidebar').addClass('z-shown-inline');
    $("#z-sidebar-choice").attr('href', "styles/zulu/theme/hidden-sidebar.css");
    localStorage.setItem('viewsb', "styles/zulu/theme/hidden-sidebar.css");
    var checkcompact = $("#z-view").attr('href');
    if (checkcompact == 'styles/zulu/theme/compact.min.css') {
        $("#z-view").attr('href', "styles/zulu/theme/sbhidden-compact.css");
        localStorage.setItem('viewsheet', "styles/zulu/theme/sbhidden-compact.css");
    }
    $grid.isotope();
    window.setTimeout(relayout, 200);
});
$('.z-show-sidebar').on('click', function(e) {
    $('.z-sidebar').removeClass('z-hidden');
    $('.packwrap').removeClass('z-fullwidth-main');
    $('.z-show-sidebar').removeClass('z-shown-inline');
    $("#z-sidebar-choice").attr('href', '');
    localStorage.setItem('viewsb', "");
    var checkcompact = $("#z-view").attr('href');
    if (checkcompact == 'styles/zulu/theme/sbhidden-compact.css') {
        $("#z-view").attr('href', "styles/zulu/theme/compact.min.css");
        localStorage.setItem('viewsheet', "styles/zulu/theme/compact.min.css");
    }
    $grid.isotope();
    window.setTimeout(relayout, 200);
});

function relayout() {
    $grid.isotope();
}
$('.z-helvetica-font').on('click', function(e) {
    $('.z-diablo-font').removeClass('z-hidden');
    $('.z-diablo-font').addClass('z-shown-inline');
    $('.z-helvetica-font').removeClass('z-shown-inline');
    $('.z-helvetica-font').addClass('z-hidden');
    $("#z-font-choice").attr('href', "styles/zulu/theme/helvetica.css");
    localStorage.setItem('fonty', "styles/zulu/theme/helvetica.css");
});
$('.z-diablo-font').on('click', function(e) {
    $('.z-diablo-font').addClass('z-hidden');
    $('.z-diablo-font').removeClass('z-shown-inline');
    $('.z-helvetica-font').removeClass('z-hidden');
    $('.z-helvetica-font').addClass('z-shown-inline');
    $("#z-font-choice").attr('href', "");
    localStorage.setItem('fonty', "");
});
var $temp = $("<input>");
var $url = location;

function bringback() {
    $('.z-copied, .z-copyurl').removeClass('z-copied-green');
    $(".z-copied").text("Copy");
}
$('.z-copyurl').on('click', function() {
    $("body").append($temp);
    $temp.val($url).select();
    document.execCommand("copy");
    $temp.remove();
    $('.z-copied, .z-copyurl').addClass('z-copied-green');
    $(".z-copied").html("Copied!");
    window.setTimeout(bringback, 750);
})

function bringbacktwo() {
    $('.z-copy-link-post-i').removeClass('z-copied-green');
    $(".z-copied-here").html('');
}
$('.z-copy-link-post').on('click', function() {
    var $temp = $("<input>");
    var $url = $(this).closest('.element-item').find('.z-hidden-post-url').html();
    $("body").append($temp);
    $temp.val($url).select();
    document.execCommand("copy");
    $temp.remove();
    $(this).closest('.element-item').find('.z-copy-link-post-i').addClass('z-copied-green');
    $(this).find('.z-copied-here').addClass('z-copied-green');
    $(this).find(".z-copied-here").html(" URL copied!");
    window.setTimeout(bringbacktwo, 750);
})
$(".z-btn-orig").on('click', function(e) {
    var target = "." + $(this).data("target");
    $('.z-items').not(target).removeClass("z-shown");
    $(target).toggleClass("z-shown");
    $grid.isotope();
});
$(".z-btn-orig-vf").on('click', function(e) {
    var target = "." + $(this).data("target");
    $('.z-items').not(target).removeClass("z-shown");
    $('.z-btn-orig-vf').removeClass('is-checked');
    $(target).toggleClass("z-shown");
    var checkmate = $('.z-items').hasClass('z-shown');
    if (checkmate) {
        $(this).addClass('is-checked');
    } else {
        $(this).removeClass('is-checked');
    }
});
$(".z-icon-box").on('click', function(e) {
    var $this = $(this).find('img').attr('src');
    $('.z-icon-button').html('<div class="z-icon-transport"></div>');
    $('.z-icon-transport').css('background', 'url(' + $this + ') no-repeat');
    $('.z-icon-transport').css('background-size', '20px');
    $('.z-icon-button').css('padding-top', '0px');
    $('.z-icon-button').addClass('z-mobile-iconbtn-padding');
    $('.z-icon-container').removeClass('z-shown');
});
$(".z-icon-box-none").on('click', function(e) {
    $('.z-icon-button').html('Icon <i class="fas fa-caret-down"></i>');
    $('.z-icon-button').removeClass('z-mobile-iconbtn-padding');
    $('.z-icon-button').css('padding-top', '9px');
    $('.z-icon-container').removeClass('z-shown');
});
$('.z-post-editor-options').on('click', function(e) {
    $(this).toggleClass('is-checked');
    var checkit = $(this).hasClass('is-checked');
    if (checkit) {
        $('.z-options').addClass('z-shown-inline');
        $('.z-options').find('.button').removeClass('is-checked');
    } else {
        $('.z-options').removeClass('z-shown-inline');
    }
});
$(".z-btn-poster").on('click', function(e) {
    $(this).closest('.element-item-vt').find('.z-poster-actions').toggleClass('z-shown');
});
$(".z-filterme").on('click', function(e) {
    $(this).toggleClass("is-checked");
    $(".z-gavel").removeClass("is-checked");
    $(".z-cog").removeClass("is-checked");
});
$(".z-cog").on('click', function(e) {
    $(this).toggleClass("is-checked");
    $(".z-gavel").removeClass("is-checked");
    $(".z-filterme").removeClass("is-checked");
});
$(".z-gavel").on('click', function(e) {
    $(this).toggleClass("is-checked");
    $(".z-cog").removeClass("is-checked");
    $(".z-filterme").removeClass("is-checked");
});
$(".z-like-btn").on('click', function(e) {
    var onelike = $('.z-crumbs-liked').text();
    var checkliked = $(this).hasClass('liked');
    if (checkliked) {
        $('.z-crumbs-liked').text(parseInt($('.z-crumbs-liked').text()) - 1);
        if (onelike === '1') {
            $('.z-crumbs-liked-lang').text('likes');
        } else {
            $('.z-crumbs-liked-lang').text('like');
        }
        $(this).find('.fa-heart').toggleClass('liked');
        $(this).removeClass('liked');
    } else {
        $('.z-crumbs-liked').text(parseInt($('.z-crumbs-liked').text()) + 1);
        if (onelike === '1') {
            $('.z-crumbs-liked-lang').text('likes');
        } else {
            $('.z-crumbs-liked-lang').text('like');
        }
        $(this).find('.fa-heart').toggleClass('liked');
        $(this).addClass('liked');
    }
});
$(document).on('click', '.z-like-btn-post', function(e) {
    var checklikedpost = $(this).hasClass('liked');
    if (checklikedpost) {
        $(this).find('.fa-heart').toggleClass('liked');
        $(this).removeClass('liked');
    } else {
        $(this).find('.fa-heart').toggleClass('liked');
        $(this).addClass('liked');
    }
});
$(".z-group-pm").on('click', function(e) {
    $('.z-group-pm-panel').toggleClass('z-shown-imp');
});
$(".z-watchbutton").on('click', function(e) {
    var checkwatchliked = $(this).hasClass('liked');
    if (checkwatchliked) {
        $(this).toggleClass('liked');
        $(this).find('.fa-eye').removeClass('z-watching');
        $(this).find('.z-watchtext').text('Watch');
    } else {
        $(this).toggleClass('liked');
        $(this).find('.fa-eye').addClass('z-watching');
        $(this).find('.z-watchtext').text('Watching');
    }
});
$(".z-bmbutton").on('click', function(e) {
    var checkbmliked = $(this).hasClass('liked');
    if (checkbmliked) {
        $(this).toggleClass('liked');
        $(this).find('.fa-bookmark').removeClass('z-watching');
        $(this).find('.z-bmtext').text('Bookmark');
    } else {
        $(this).toggleClass('liked');
        $(this).find('.fa-bookmark').addClass('z-watching');
        $(this).find('.z-bmtext').text('Bookmarked');
    }
});
$(".z-act-toggle").on('click', function(e) {
    $(".z-act-toggle").find('.z-checkgen').html("");
    $(".z-act-toggle").removeClass('z-blizz-blue');
    $(this).addClass('z-blizz-blue');
    $(this).append('<span class="z-checkgen z-blue-vibrant"><i class="fab fa-hotjar"></i></span>');
});
$(".z-act-1").on('click', function(e) {
    $("#z-theme").attr('href', 'styles/zulu/theme/act1.css');
    localStorage.setItem('theme', "styles/zulu/theme/act1.css");
});
$(".z-act-2").on('click', function(e) {
    $("#z-theme").attr('href', 'styles/zulu/theme/act2.css');
    localStorage.setItem('theme', "styles/zulu/theme/act2.css");
});
$(".z-act-3").on('click', function(e) {
    $("#z-theme").attr('href', 'styles/zulu/theme/act3.css');
    localStorage.setItem('theme', "styles/zulu/theme/act3.css");
});
$(".z-act-4").on('click', function(e) {
    $("#z-theme").attr('href', 'styles/zulu/theme/act4.css');
    localStorage.setItem('theme', "styles/zulu/theme/act4.css");
});
$(".z-act-5").on('click', function(e) {
    $("#z-theme").attr('href', 'styles/zulu/theme/act5.css');
    localStorage.setItem('theme', "styles/zulu/theme/act5.css");
});
$(".z-chg-act-click").on('click', function(e) {
    $(".z-chg-act").toggleClass('z-chg-act-visible');
    $(this).find('.fa-caret-down').toggleClass('z-rot');
});
$(".z-chg-settings-click").on('click', function(e) {
    $(".z-chg-settings").toggleClass('z-chg-settings-visible');
    $(this).find('.fa-caret-down').toggleClass('z-rot');
});
$(".z-chg-settings-mcp-click").on('click', function(e) {
    $(".z-chg-settings-mcp").toggleClass('z-chg-settings-mcp-visible');
    $(this).find('.fa-caret-down').toggleClass('z-rot');
});
$(".z-userdetails, .z-mobi-cog").on('click', function(e) {
    $('.z-dropdown').toggleClass('z-shown');
    $('.z-dropdown-noti').removeClass('z-shown');
    $('.z-dropdown-noti-list').addClass('z-shown');
});
$(".z-noti-dd-trigger").on('click', function(e) {
    $('.z-dropdown-noti').toggleClass('z-shown');
    $('.z-dropdown').removeClass('z-shown');
    $('.z-dropdown-noti-list').addClass('z-shown');
});
$(".z-jumpbox-trigger").on('click', function(e) {
    $('.z-jumpbox').toggleClass('z-shown');
    $(this).toggleClass('liked');
    $grid.isotope();
});
$(".z-noti-js-button").on('click', function(e) {
    $('.z-noti-unread').addClass('z-noti-read');
    $(this).closest('.z-smalltip-s').find('.z-hr').addClass('z-hidden');
    $('.z-noti-badge').addClass('z-hidden');
    $(this).addClass('is-checked');

    function resettick() {
        $(this).removeClass('z-copied-green');
        $(this).removeClass('is-checked');
    }
    $(this).addClass('z-copied-green');
    $(this).html('<i class="fas fa-check"></i>&nbsp;&nbsp;Marked read');
    $('.z-js-dd-noti-pointer').addClass('zm-dd-noti-updated');
    window.setTimeout(resettick, 750);
});
$(".z-close").on('click', function(e) {
    $(".z-dropdown-noti").removeClass('z-shown');
});
$(".z-cog-btn-post").on('click', function(e) {
    $grid.isotope();
    $(this).toggleClass('is-checked')
});
$(".z-obj-img-thumb").on('click', function(e) {
    $(".z-obj-img-activethumb").removeClass('z-obj-img-activethumb');
    $(this).toggleClass('z-obj-img-activethumb');
});
$(".z-thumb-1").on('click', function(e) {
    $(".z-img-1").addClass('z-shown');
    $(".z-img-2").removeClass('z-shown');
    $(".z-img-3").removeClass('z-shown');
    $grid.isotope();
});
$(".z-thumb-2").on('click', function(e) {
    $(".z-img-1").removeClass('z-shown');
    $(".z-img-2").addClass('z-shown');
    $(".z-img-3").removeClass('z-shown');
    $grid.isotope();
});
$(".z-thumb-3").on('click', function(e) {
    $(".z-img-1").removeClass('z-shown');
    $(".z-img-2").removeClass('z-shown');
    $(".z-img-3").addClass('z-shown');
    $grid.isotope();
});
$(".z-mm-db-md").on('click', function(e) {
    $('.z-mm-db').toggleClass('z-shown');
    $('.z-mm-tools').removeClass('z-shown');
    $('.z-mm-forums').removeClass('z-shown');
    $('.z-mm-about').removeClass('z-shown');
    $('.z-mm-trade').removeClass('z-shown');
    $(".z-mm-trade-md").find('.fa-caret-down').removeClass('z-rot');
    $(".z-mm-db-md").find('.fa-caret-down').toggleClass('z-rot');
    $(".z-mm-tools-md").find('.fa-caret-down').removeClass('z-rot');
    $(".z-mm-builds-md").find('.fa-caret-down').removeClass('z-rot');
    $(".z-mm-forums-md").find('.fa-caret-down').removeClass('z-rot');
    $(".z-mm-about-md").find('.fa-caret-down').removeClass('z-rot');
});
$(".z-mm-trade-md").on('click', function(e) {
    $('.z-mm-forums').removeClass('z-shown');
    $('.z-mm-db').removeClass('z-shown');
    $('.z-mm-tools').removeClass('z-shown');
    $('.z-mm-about').removeClass('z-shown');
    $('.z-mm-trade').toggleClass('z-shown');
    $(".z-mm-trade-md").find('.fa-caret-down').toggleClass('z-rot');
    $(".z-mm-forums-md").find('.fa-caret-down').removeClass('z-rot');
    $(".z-mm-tools-md").find('.fa-caret-down').removeClass('z-rot');
    $(".z-mm-builds-md").find('.fa-caret-down').removeClass('z-rot');
    $(".z-mm-about-md").find('.fa-caret-down').removeClass('z-rot');
});
$(".z-mm-forums-md").on('click', function(e) {
    $('.z-mm-forums').toggleClass('z-shown');
    $('.z-mm-db').removeClass('z-shown');
    $('.z-mm-tools').removeClass('z-shown');
    $('.z-mm-about').removeClass('z-shown');
    $('.z-mm-trade').removeClass('z-shown');
    $(".z-mm-trade-md").find('.fa-caret-down').removeClass('z-rot');
    $(".z-mm-forums-md").find('.fa-caret-down').toggleClass('z-rot');
    $(".z-mm-tools-md").find('.fa-caret-down').removeClass('z-rot');
    $(".z-mm-builds-md").find('.fa-caret-down').removeClass('z-rot');
    $(".z-mm-about-md").find('.fa-caret-down').removeClass('z-rot');
});
$(".z-mm-about-md").on('click', function(e) {
    $('.z-mm-about').toggleClass('z-shown');
    $('.z-mm-forums').removeClass('z-shown');
    $('.z-mm-db').removeClass('z-shown');
    $('.z-mm-tools').removeClass('z-shown');
    $('.z-mm-trade').removeClass('z-shown');
    $(".z-mm-trade-md").find('.fa-caret-down').removeClass('z-rot');
    $(".z-mm-about-md").find('.fa-caret-down').toggleClass('z-rot');
    $(".z-mm-tools-md").find('.fa-caret-down').removeClass('z-rot');
    $(".z-mm-builds-md").find('.fa-caret-down').removeClass('z-rot');
    $(".z-mm-forums-md").find('.fa-caret-down').removeClass('z-rot');
});
$(".z-mm-tools-md").on('click', function(e) {
    $('.z-mm-db').removeClass('z-shown');
    $('.z-mm-tools').toggleClass('z-shown');
    $('.z-mm-forums').removeClass('z-shown');
    $('.z-mm-about').removeClass('z-shown');
    $('.z-mm-trade').removeClass('z-shown');
    $(".z-mm-trade-md").find('.fa-caret-down').removeClass('z-rot');
    $(".z-mm-tools-md").find('.fa-caret-down').toggleClass('z-rot');
    $(".z-mm-db-md").find('.fa-caret-down').removeClass('z-rot');
    $(".z-mm-builds-md").find('.fa-caret-down').removeClass('z-rot');
    $(".z-mm-forums-md").find('.fa-caret-down').removeClass('z-rot');
    $(".z-mm-about-md").find('.fa-caret-down').removeClass('z-rot');
});
$(".z-add-slot-4").click(function() {
    $('#soldfor_4').removeClass('z-hidden');
    $(this).addClass('z-hidden');
    $(".z-add-slot-5").removeClass('z-hidden');
});
$(".z-add-slot-5").click(function() {
    $('#soldfor_5').removeClass('z-hidden');
    $(this).addClass('z-hidden');
    $(".z-add-slot-6").removeClass('z-hidden');
});
$(".z-add-slot-6").click(function() {
    $('#soldfor_6').removeClass('z-hidden');
    $(this).addClass('z-hidden');
    $(".z-add-slot-7").removeClass('z-hidden');
});
$(".z-add-slot-7").click(function() {
    $('#soldfor_7').removeClass('z-hidden');
    $(this).addClass('z-hidden');
    $(".z-add-slot-8").removeClass('z-hidden');
});
$(".z-add-slot-8").click(function() {
    $('#soldfor_8').removeClass('z-hidden');
    $(this).addClass('z-hidden');
    $(".z-add-slot-9").removeClass('z-hidden');
});
$(".z-add-slot-9").click(function() {
    $('#soldfor_9').removeClass('z-hidden');
    $(this).addClass('z-hidden');
    $(".z-add-slot-10").removeClass('z-hidden');
});
$(".z-add-slot-10").click(function() {
    $('#soldfor_10').removeClass('z-hidden');
    $(this).addClass('z-hidden');
});
$(".z-live").keyup(function() {
    $('.z-search-caret').removeClass('z-rot')
    $('.z-search-options').addClass('z-hidden');
    if (this.value.length < 1) return;
    $(".z-dropdown-search-results").addClass("z-shown");
    if (this.value.length > 1) return;
    $(".z-dropdown-search-results").removeClass("z-shown");
    if ($(".z-live").val() == "") {
        $(".z-dropdown-search-results").removeClass("z-shown");
    }
});
$(".z-toggle-scroll").click(function() {
    $('.z-no-code').toggleClass('z-no-code-fullw');
    var expanded = $('.z-no-code').hasClass('z-no-code-fullw');
    if (expanded) {
        $('.z-toggle-scroll-crate').html('<i class="fas fa-compress"></i> <span class="z-space"></span>Collapse view');
    } else {
        $('.z-toggle-scroll-crate').html('<i class="fas fa-expand"></i> <span class="z-space"></span>Expand view');
    }
});
$('.z-search-db').click(function() {
    $('.z-check-wrap ').appendTo($(this).find('.z-wrap-seat'));
    $('.user-live-search ').addClass('z-hidden');
    $('.user-live-search ').removeClass('z-shown');
    $('.topic-live-search ').removeClass('z-hidden');
    $('.topic-live-search ').addClass('z-shown');
    $('.forum-live-search ').removeClass('z-shown');
    $('.forum-live-search ').addClass('z-hidden');
    $('.z-search-indicator').addClass('z-db-search');
    $('.z-search-indicator').removeClass('zi-skillcalc');
    $('.z-search-indicator').removeClass('zi-patch');
});
$('.z-search-topics').click(function() {
    $('.z-check-wrap ').appendTo($(this).find('.z-wrap-seat'));
    $('.user-live-search ').addClass('z-hidden');
    $('.user-live-search ').removeClass('z-shown');
    $('.topic-live-search ').addClass('z-hidden');
    $('.topic-live-search ').removeClass('z-shown');
    $('.forum-live-search ').addClass('z-shown');
    $('.forum-live-search ').removeClass('z-hidden');
    $('.z-search-indicator').removeClass('z-db-search');
    $('.z-search-indicator').removeClass('zi-patch');
    $('.z-search-indicator').addClass('zi-skillcalc');
});
$('.z-search-users').click(function() {
    $('.z-check-wrap ').appendTo($(this).find('.z-wrap-seat'));
    $('.user-live-search ').removeClass('z-hidden');
    $('.user-live-search ').addClass('z-shown');
    $('.topic-live-search ').removeClass('z-shown');
    $('.topic-live-search ').addClass('z-hidden');
    $('.forum-live-search ').removeClass('z-shown');
    $('.forum-live-search ').addClass('z-hidden');
    $('.z-search-indicator').removeClass('z-db-search');
    $('.z-search-indicator').removeClass('zi-skillcalc');
    $('.z-search-indicator').addClass('zi-patch');
});
$(document).on('click', '.z-chat-gem, .z-chat-gem-text', function(e) {
    $('.z-chat-gem').toggleClass('z-chat-gem-purple');
    $('.z-chat-gem-text').toggleClass('z-hidden');
});
$(".z-poll-submit").click(function() {
    function resettick() {
        $(this).removeClass('z-copied-green');
        $(this).removeClass('is-checked');
        $(this).attr('value', 'Submit vote');
    }
    $(this).addClass('z-copied-green');
    $(this).attr('value', 'Vote submitted');
    window.setTimeout(resettick, 750);

    function resettick2() {
        $('.z-poll-submit').attr('value', 'Submit vote');
        $('.z-poll-submit').removeClass('z-copied-green');
    }
    window.setTimeout(resettick2, 750);
    $grid.isotope();
});
var mark = function() {
    var keyword = $(".quicksearch").val();
    $(".grid").unmark({
        done: function() {
            $(".grid").mark(keyword);
        }
    });
};
$(".quicksearch").keyup(debounce(mark, 300));

function debounce(func, wait, immediate) {
    var timeout;
    return function() {
        var context = this,
            args = arguments;
        var later = function() {
            timeout = null;
            if (!immediate) func.apply(context, args);
        };
        var callNow = immediate && !timeout;
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
        if (callNow) func.apply(context, args);
    };
};
$('.spoiler-header').click(function() {
    window.setTimeout(relayout, 50)
});
var tooltip = window.document.getElementsByClassName("z-tooltip");
window.onmousemove = function(ev) {
    var leftPixelSpace = ev.clientX;
    var rightPixelSpace = this.innerWidth - leftPixelSpace;
    var topPixelSpace = ev.clientY;
    var bottomPixelSpace = this.innerHeight - topPixelSpace;
    [...tooltip].forEach(tooltip => {
        let tooltipPosX = leftPixelSpace > rightPixelSpace ? leftPixelSpace - tooltip.offsetWidth : leftPixelSpace + 10;
        let tooltipPosY = topPixelSpace > bottomPixelSpace ? topPixelSpace - tooltip.offsetHeight : topPixelSpace + 10;
        tooltip.style.left = tooltipPosX + "px";
        tooltip.style.top = tooltipPosY + "px";
    });
};

function bringbacktradeblizz() {
    $('.z-copi-blizz').html('');
    $('.z-copy-blizz').removeClass('is-checked');
}

function bringbacktradedisc() {
    $('.z-copi-disc').html('');
    $('.z-copy-disc').removeClass('is-checked');
}
$('.z-copy-blizz').on('click', function() {
    var $temp = $("<input>");
    var $url = $(this).closest('.z-copy-contacts-vt').find('.z-copy-blizz-value').html();
    $("body").append($temp);
    $temp.val($url).select();
    document.execCommand("copy");
    $temp.remove();
    $(this).addClass('is-checked');
    $(this).closest('.z-copy-blizz').find('.z-copi-blizz').html('<span class="z-sets-title">Copied ID</span>')
    window.setTimeout(bringbacktradeblizz, 1500);
})
$('.z-copy-disc').on('click', function() {
    var $temp = $("<input>");
    var $url = $(this).closest('.element-item').find('.z-copy-disc-value').html();
    $("body").append($temp);
    $temp.val($url).select();
    document.execCommand("copy");
    $temp.remove();
    $(this).addClass('is-checked');
    $(this).closest('.z-copy-disc').find('.z-copi-disc').html('<span class="z-sets-title">Copied ID</span>')
    window.setTimeout(bringbacktradedisc, 1500);
})
$(function() {
    var checkforcheck = $("#z-view").attr('href');
    if (checkforcheck == 'styles/zulu/theme/compact.min.css') {
        $('.z-compact-view').addClass('is-checked');
    } else if (checkforcheck == 'styles/zulu/theme/sbhidden-compact.css') {
        $('.z-compact-view').addClass('is-checked');
    } else if (checkforcheck == 'styles/zulu/detailed.css') {
        $('.z-detailed-view').addClass('is-checked');
    }
    var checkforwide = $("#z-superwide-choice").attr('href');
    if (checkforwide == 'styles/zulu/theme/superwide.css') {
        $('.z-supersize-btn').addClass('is-checked');
    } else if (checkforwide == '') {
        $('.z-supersize-btn').removeClass('is-checked');
    }
    window.onload = function() {
        var input = $('.z-focus').focus();
    }
    var getlink = $('.z-pl-link').attr('href');
    $('#zululikes').load(getlink + ' .row:nth-child(-n+4)', '', function(response, status, xhr) {
        if (status == 'error') {
            var msg = "Couldn't load";
            $(".zululikes").html(msg + xhr.status + " " + xhr.statusText);
        }
        $(this).css('opacity', 1);
        window.setTimeout(relayout, 50);
    })

    function relayout() {
        $grid.isotope();
    }
    var getclass = $('.zp-class').find('img').attr('alt');
    $('.zp-class-result').html(getclass);
    var getplat = $('.zp-plat').find('img').attr('alt');
    $('.zp-plat-result').html(getplat);
    var getregion = $('.zp-region').find('img').attr('alt');
    $('.zp-region-result').html(getregion);
    $('#pf_ingame, #pf_bnet, #pf_discord').addClass('z-textinput z-slender z-nobot');
    $('#pf_bnet').addClass('z-blizz-blue');
    $('#pf_discord').addClass('z-discord-purple');
    $('#pf_faveitem, #pf_aboutme').addClass('z-textinput z-less-bot');
    $('#pf_faveitem').css('min-height', '52px').css('height', '52px');
    $('#pf_xpac_1').closest('label').append(' <span class="zi zi-pf zi-xpac"></span> (Lord of Destruction)');
    $('#pf_xpac_2').closest('label').append(' <span class="zi zi-pf zi-classic"></span> (Classic)');
    $('#pf_ladder_1').closest('label').append(' <span class="zi zi-pf zi-ladder"></span> (Ladder)');
    $('#pf_ladder_2').closest('label').append(' (Non-Ladder)');
    $('#pf_hardcore_1').closest('label').addClass('error').append(' <span class="zi zi-pf zi-hardcore"></span> (Hardcore)');
    $('#pf_hardcore_2').closest('label').append(' (Softcore)');
    var checkedone = $('.z-radios').find('input').is(":checked");
    if (checkedone) {
        var actualchecked = $('input[name=icon]:checked').closest('.z-icon-box').find('img').attr('src');
        $('.z-icon-button').html('<div class="z-icon-transport"></div>');
        $('.z-icon-transport').css('background', 'url(' + actualchecked + ') no-repeat');
        $('.z-icon-transport').css('background-size', '20px');
        $('.z-icon-button').css('padding-top', '0px');
        $('.z-icon-container').removeClass('z-shown');
    }
    $(".z-img-1").addClass('z-shown');
    var theme = localStorage.getItem('theme');
    var act1 = $(".z-act-1")
    if (theme == 'styles/zulu/theme/act1.css') {
        act1.addClass('z-blizz-blue');
        act1.append('<span class="z-checkgen"><i class="fab fa-hotjar"></i></span>');
    }
    var act2 = $(".z-act-2")
    if (theme == 'styles/zulu/theme/act2.css') {
        act2.addClass('z-blizz-blue');
        act2.append('<span class="z-checkgen"><i class="fab fa-hotjar"></i></span>');
    }
    var act3 = $(".z-act-3")
    if (theme == 'styles/zulu/theme/act3.css') {
        act3.addClass('z-blizz-blue');
        act3.append('<span class="z-checkgen"><i class="fab fa-hotjar"></i></span>');
    }
    var act4 = $(".z-act-4")
    if (theme == 'styles/zulu/theme/act4.css') {
        act4.addClass('z-blizz-blue');
        act4.append('<span class="z-checkgen"><i class="fab fa-hotjar"></i></span>');
    }
    var act5 = $(".z-act-5")
    if (theme == 'styles/zulu/theme/act5.css') {
        act5.addClass('z-blizz-blue');
        act5.append('<span class="z-checkgen"><i class="fab fa-hotjar"></i></span>');
    }
    var view = localStorage.getItem('view');
    var detailed = $('.z-detailed-view');
    var compact = $('.z-compact-view');
    if (view == 'styles/zulu/theme/detailed.css') {
        detailed.addClass('is-checked');
        compact.removeClass('is-checked');
    }
    if (view == 'styles/zulu/theme/compact.min.css') {
        compact.addClass('is-checked');
        detailed.removeClass('is-checked');
    }
    $(".z-attach-tab").each(function() {
        var target = "." + $(this).data("target");
        var numCount = $(target).find('.file-name-uploaded').length;
        if (numCount > 0) {
            $(this).find('.z-numcount').html(numCount);
            $(this).find('.z-numcount').addClass('z-count-badge');
        } else {
            $(this).find('.z-numcount').removeClass('z-count-badge');
            $(this).find('.z-numcount').html('');
        }
    });

    function isMobile() {
        try {
            document.createEvent("TouchEvent");
            return true;
        } catch (e) {
            return false;
        }
    }
    if (isMobile() == true) {
        $(document).on('tap touchstart click', '.ajax_catch', function(e) {
            e.preventDefault();
            var link = $(this).find('.ajax_link').attr('data-href');
            $.ajax({
                url: link,
                retries: 2
            }).done(function(html) {
                $('.d2-tt').html(html);
            });
            return false;
        });
        const template = document.getElementById('template');
        tippy.delegate('body', {
            target: '.ajax_catch',
            content: template.innerHTML,
            allowHTML: true,
            theme: 'tomato',
            arrow: true,
            duration: 150,
            touch: 'true',
            interactive: true,
            placement: 'bottom',
            popperOptions: {
                modifiers: [{
                    name: 'flip',
                    enabled: false
                }, ],
            },
            offset: [0, 10],
        });
        const template_ban = document.getElementById('template_ban');
        tippy('.z-horadric-banhammer', {
            content: template_ban.innerHTML,
            allowHTML: true,
            theme: 'tomato',
            arrow: true,
            duration: 150,
            touch: 'true',
            interactive: true,
            placement: 'bottom',
            popperOptions: {
                modifiers: [{
                    name: 'flip',
                    enabled: false
                }, ],
            },
            offset: [0, 8],
        });
        const template_reg = document.getElementById('template_reg');
        tippy('.z-template_reg', {
            content: template_reg.innerHTML,
            allowHTML: true,
            theme: 'tomato',
            arrow: true,
            duration: 150,
            touch: 'true',
            interactive: true,
            placement: 'bottom',
            popperOptions: {
                modifiers: [{
                    name: 'flip',
                    enabled: false
                }, ],
            },
            offset: [0, 8],
        });
        const templatesoon = document.getElementById('template_soon');
        tippy('.z-soon', {
            content: templatesoon.innerHTML,
            allowHTML: true,
            theme: 'tomato',
            arrow: true,
            duration: 150,
            touch: 'true',
            interactive: true,
            placement: 'bottom',
            popperOptions: {
                modifiers: [{
                    name: 'flip',
                    enabled: false
                }, ],
            },
            offset: [0, 8],
        });
    } else {
        $(document).on('mouseenter', '.z-template_reg', function(e) {
            $('[data-tippy-root]"').find('.d2-tt').html();
            var checkcontents = $('[data-tippy-root]"').find('.d2-tt').html();
            var grade = $('#template_reg').find('.d2-tt').html();
            $('[data-tippy-root]"').find('.d2-tt').html(grade);
            return false;
        });
        $(document).on('mouseenter', '.ajax_catch', function(e) {
            $('.d2-tt').html();
            var link = $(this).find('.ajax_link').attr('data-href');
            $.ajax({
                url: link
            }).done(function(html) {
                $('.d2-tt').html(html);
            });
            return false;
        });
        $(document).on('mouseenter', '.ajax_catch_two', function(e) {
            $('.d2-tt-two').html();
            var link = $(this).find('.ajax_link').attr('data-href');
            $.ajax({
                url: link
            }).done(function(html) {
                $('.d2-tt-two').html(html);
            });
            return false;
        });
        const template = document.getElementById('template');
        tippy.delegate('body', {
            target: '.ajax_catch',
            content: template.innerHTML,
            allowHTML: true,
            followCursor: true,
            theme: 'tomato',
            arrow: false,
            duration: 150,
            offset: [0, 10],
            placement: 'auto',
            placement: 'auto-start',
            placement: 'auto-end',
            touch: 'true'
        });
        const template_ban = document.getElementById('template_ban');
        tippy('.z-horadric-banhammer', {
            content: template_ban.innerHTML,
            allowHTML: true,
            followCursor: true,
            theme: 'tomato',
            arrow: false,
            duration: 150,
            offset: [0, 10],
            placement: 'auto',
            placement: 'auto-start',
            placement: 'auto-end',
            touch: 'true'
        });
        const template_reg = document.getElementById('template_reg');
        tippy('.z-template_reg', {
            content: '',
            content: template_reg.innerHTML,
            allowHTML: true,
            followCursor: true,
            theme: 'tomato',
            arrow: false,
            duration: 150,
            offset: [0, 10],
            placement: 'auto',
            placement: 'auto-start',
            placement: 'auto-end',
            touch: 'true'
        });
        const templatesoon = document.getElementById('template_soon');
        tippy('.z-soon', {
            content: templatesoon.innerHTML,
            allowHTML: true,
            followCursor: true,
            theme: 'tomato',
            arrow: false,
            duration: 150,
            offset: [0, 10],
            placement: 'auto',
            placement: 'auto-start',
            placement: 'auto-end',
            touch: 'true'
        });
    }

    function getLastNumber(url) {
        var matches = url.match(/\d+/g);
        return matches[matches.length - 1];
    }

    function linkChange() {
        var urli = $(this).attr('href');
        var urlio = getLastNumber(urli)
        var urlioo = urlio.toString()
        $(this).attr('data-href', '/initial.php?var=' + urlioo);
        var linki = $(this).attr('data-href');
        var myThis = this;
        $.ajax({
            url: linki
        }).done(function(html) {
            $(myThis).html(html);
        });
        $(this).attr('data-href', '/ajax.php?var=' + urlioo);
        $(this).removeClass('ajax_url');
        $(this).addClass('ajax_link');
        $(this).wrap('<span class="ajax_catch"></span>');
    }
    $.fn.isInViewport = function() {
        let elementTop = $(this).offset().top;
        let elementBottom = elementTop + $(this).outerHeight();
        let viewportTop = $(window).scrollTop();
        let viewportBottom = viewportTop + $(window).height();
        return elementBottom > viewportTop && elementTop < viewportBottom;
    };
    var checklazyinitial = $('.z-check-lazy-initial').hasClass('yup');
    if (checklazyinitial) {
        $(window).on('resize scroll', function() {
            $('.ajax_url, .postlink, .postlink-local').each(function() {
                if ($(this).isInViewport()) {
                    var parentspoiler = $(this).closest('.spoiler').find('.ajax_url, .postlink, .postlink-local').each(linkChange);
                }
            });
        });
    } else {
        $('.ajax_url, .z-profile-one').each(linkChange);
    }
    if (isMobile() == true) {
        if (window.matchMedia("(orientation: portrait)").matches) {
            $('html').swipe({
                swipe: function(event, direction, distance, duration, fingerCount, fingerData) {
                    if (direction == 'left') {
                        $('.toggle-panel').trigger('click');
                        $('#fixed-nav-l').css({
                            "display": "none"
                        });
                    } else if (direction == 'right') {
                        $('.toggle-panel-l').trigger('click');
                        $('#fixed-nav').css({
                            "display": "none"
                        });
                    }
                },
                threshold: 185
            });
        } else {
            $('html').swipe({
                swipe: function(event, direction, distance, duration, fingerCount, fingerData) {
                    event.preventDefault();
                    if (direction == 'left') {
                        return null;
                    } else if (direction == 'right') {
                        return null;
                    }
                },
            });
        }
    }
    var panelUser = $('#scotch-panel').scotchPanel({
        containerSelector: '#site-wrapper',
        direction: 'right',
        duration: 200,
        transition: 'ease',
        clickSelector: '.toggle-panel',
        distanceX: '50%',
        enableEscapeKey: false,
        beforePanelOpen: function() {
            $('header').css({
                '-moz-transform': 'translate3d(-50%, 0, 0)',
                '-ms-transform': 'translate3d(-50%, 0, 0)',
                '-o-transform': 'translate3d(-50%, 0, 0)',
                '-webkit-transform': 'translate3d(-50%, 0, 0)',
                'transform': 'translate3d(-50%, 0, 0)'
            });
            $('#fixed-nav').css({
                "display": "block"
            });
            $('.z-header-btn').removeClass('z-glowblue');
        },
        beforePanelClose: function() {
            $('header').css({
                '-moz-transform': 'translate3d(0, 0, 0)',
                '-ms-transform': 'translate3d(0, 0, 0)',
                '-o-transform': 'translate3d(0, 0, 0)',
                '-webkit-transform': 'translate3d(0, 0, 0)',
                'transform': 'translate3d(0, 0, 0)'
            });
            $('#fixed-nav').css({
                "display": "none"
            });
            $('.z-header-btn').removeClass('z-glowblue');
        }
    });
    var panelNav = $('#scotch-panel').scotchPanel({
        containerSelector: '#site-wrapper',
        direction: 'left',
        duration: 200,
        transition: 'ease',
        clickSelector: '.toggle-panel-l',
        distanceX: '50%',
        enableEscapeKey: false,
        beforePanelOpen: function() {
            $('header').css({
                '-moz-transform': 'translate3d(50%, 0, 0)',
                '-ms-transform': 'translate3d(50%, 0, 0)',
                '-o-transform': 'translate3d(50%, 0, 0)',
                '-webkit-transform': 'translate3d(50%, 0, 0)',
                'transform': 'translate3d(50%, 0, 0)'
            });
            $('.z-header-btn').addClass('z-glowblue');
            $('#fixed-nav-l').css({
                "display": "block"
            });
            $('#scotch-panel').css({
                'width': '',
                'height': ''
            });
        },
        beforePanelClose: function() {
            $('header').css({
                '-moz-transform': 'translate3d(0, 0, 0)',
                '-ms-transform': 'translate3d(0, 0, 0)',
                '-o-transform': 'translate3d(0, 0, 0)',
                '-webkit-transform': 'translate3d(0, 0, 0)',
                'transform': 'translate3d(0, 0, 0)'
            });
            $('.z-header-btn').removeClass('z-glowblue');
            $('#fixed-nav-l').css({
                "display": "none"
            });
        }
    });
    $("#site-wrapper").on('click', function(e) {
        var notiopen = $('.z-dropdown-noti').hasClass('z-shown');
        var deskuser = $('.z-dropdown').hasClass('z-shown');
        var useropen = $('#fixed-nav').css('display');
        var navopen = $('#fixed-nav-l').css('display');
        var searchopen = $('.z-dropdown-search-results').hasClass('z-shown');
        if (notiopen) {
            $('.z-dropdown-noti').removeClass('z-shown');
            $('.z-dropdown-noti-list').addClass('z-shown');
        }
        if (useropen == 'block') {
            panelUser.close();
        }
        if (navopen == 'block') {
            panelUser.close();
        }
        if (deskuser) {
            $('.z-dropdown').removeClass('z-shown');
        }
        if (searchopen) {
            $('.z-dropdown-search-results').removeClass('z-shown');
        }
        $('.z-search-options').addClass('z-hidden');
        $('.z-search-caret').removeClass('z-rot');
        $('.z-header-btn').removeClass('z-glowblue');
    });
    var $sbitems = $('.z-sbshift-tools, .z-sbshift-randomdb, .z-sbshift-larticle, .z-sbshift-randombuild, .z-sbshift-topics');
    const sidebarShown = window.matchMedia("(min-width: 1366px)");
    const mobileSearch = window.matchMedia("(max-width: 699px)");
    var $mobisearch = $('.z-live');
    var $mobisearchres = $('.z-dropdown-anchor-search');
    var $usernav = $('.z-js-user');
    var $userdetails = $('.z-js-userdetails');
    var $usergold = $('.z-js-usergold');
    var $useravatar = $('.z-avatar');
    var $usernotis = $('.zm-noti-bell');
    var $usernotiresults = $('.z-dropdown-anchor-noti');
    var $quicksearcher = $('.z-js-quicksearch-grab');
    var $bigtips = $('.z-tt');
    var $notibadge = $('.z-noti-badge');
    var lala = $('body').hasClass('viewtopic');

    function handleSidebar(e) {
        if (e.matches) {
            $grid.isotope('remove', $sbitems);
            $sbitems.appendTo($(".z-sidebar"));
            $sbitems.removeAttr("style");
            $sbitems.removeClass('z-sbshift-brown');
        } else {
            $grid.append($sbitems);
            $grid.isotope('insert', $sbitems);
            $sbitems.addClass("z-sbshift-brown");
            $sbitems.addClass("z-shown");
            $sbitems.css("display", "block");
            $grid.isotope();
        }
    }

    function handleMobileSearch(e) {
        if (e.matches) {
            $mobisearch.appendTo($(".zm-tx-search"));
            $mobisearchres.appendTo($(".zm-tx-search"));
            $('.z-loading-search').prependTo('.zm-tx-search');
            $usernav.appendTo($('.z-mm-user'));
            $usergold.prependTo($('.z-js-user'));
            $userdetails.prependTo($('.z-js-user'));
            $useravatar.appendTo($('.z-header-btn-r'));
            $usernotis.appendTo($('.zm-noti-hook'));
            $usernotiresults.prependTo($('.zm-tx-noti-results'))
            $quicksearcher.appendTo($('.z-js-quicksearch'));
            $quicksearcher.addClass('z-shown-inline-i');
            $('.z-tooltip').addClass('z-saviour');
            $('.z-saviour').removeClass('z-tooltip');
            $('.z-bigtip').addClass('zm-tt-pres');
            $(".z-tt").on('click', function(e) {
                $(this).find('.zm-tt-pres').toggleClass('z-shown-imp');
            });
            if (lala) {
                $('.element-item').each(function() {
                    $(this).find('.postlove-button').prependTo($(this).find('.z-poster-buttons'));
                    $(this).find('.z-like-btn-post').removeClass('z-btn-tf');
                });
            } else {}
        } else {
            $mobisearch.appendTo($(".z-subnav-right"));
            $mobisearchres.appendTo($(".z-subnav-right"));
            $('.z-loading-search').appendTo($('.z-subnav-right'));
            $usernav.appendTo($('.z-js-user-return'));
            $usergold.appendTo($('.z-js-usergold-return'));
            $usernotis.appendTo($('.zm-noti-get'));
            $usernotiresults.appendTo($('.zm-noti-get'));
            $userdetails.appendTo($('.z-userdetails'));
            $useravatar.appendTo($('.z-js-avatar-return'));
            $quicksearcher.prependTo($('.z-js-quicksearch-return'));
            $quicksearcher.addClass('z-shown-inline-i');
            $('.z-bigtip').removeClass('zm-tt-pres');
            $('.z-saviour').addClass('z-tooltip');
            $('.z-tooltip').removeClass('z-saviour');
            panelUser.close();
            $('#fixed-nav, #fixed-nav-l').css({
                'display': 'none'
            });
            $('header').css({
                'transform': 'none'
            });
            $('.scotch-panel-canvas').css({
                'transform': 'none'
            });
            $notibadge.addClass('z-shown-block');
            if (lala) {
                $('.element-item').each(function() {
                    $(this).find('.postlove-button').prependTo($(this).find('.z-poster-actions-tr'));
                    $(this).find('.z-like-btn-post').addClass('z-btn-tf');
                });
            }
        }
    }
    sidebarShown.addListener(handleSidebar);
    mobileSearch.addListener(handleMobileSearch);
    handleSidebar(sidebarShown);
    handleMobileSearch(mobileSearch);
    const observer = lozad();
    observer.observe();
    $(document).on('lazybeforeunveil lazyloaded', function(e) {
        var addClass, removeClass;
        if (e.type == 'lazyloaded') {
            addClass = 'lazyloaded';
            removeClass = 'lazyloading';
        } else {
            addClass = 'lazyloading';
            removeClass = 'lazyloaded';
        }
        $(e.target).closest('.image-wrap').addClass(addClass).removeClass(removeClass);
    });
    $(window).scroll(function() {
        $grid.isotope();
    });
});